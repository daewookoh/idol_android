# PasswordResetScreen

> 이메일을 입력하여 비밀번호 재설정 메일을 받는 화면

---

## 🎯 주요 기능

- 이메일 입력 및 형식 검증
- 비밀번호 재설정 메일 발송 요청
- 성공/실패 다이얼로그 표시
- 자동 포커스 및 키보드 제어

---

## 📦 UseCases

* **UserRepository.findPassword**: 비밀번호 재설정 메일 발송 요청

---

## 🌐 호출 API 및 사용 Field

### User API
* **POST /user/findpassword**
  * email
  * 응답: success, gcode, message

---

## 🔄 화면 플로우

### 1️⃣ 진입
* Navigation: EmailLoginScreen에서 "비밀번호 찾기" 클릭
* 파라미터: 없음
* 자동 포커스: 이메일 입력 필드

### 2️⃣ 사용자 액션

| 액션 | 설명 | 결과 |
|------|------|------|
| 이메일 입력 | 이메일 주소 입력 | 실시간 형식 검증 |
| 확인 버튼 클릭 | 비밀번호 재설정 요청 | API 호출 |
| 키보드 Done | 이메일 입력 완료 | API 호출 (확인 버튼과 동일) |
| 뒤로가기 | 이전 화면으로 이동 | EmailLoginScreen |

### 3️⃣ 처리 플로우
1. 이메일 형식 검증 (Patterns.EMAIL_ADDRESS)
2. findPassword API 호출
3. **성공 시**: 성공 다이얼로그 표시 → 확인 클릭 → 이전 화면
4. **실패 시**: 에러 다이얼로그 표시 → 확인 클릭 → 화면 유지

### 4️⃣ 종료
* ✅ 성공 시 → 성공 다이얼로그 확인 → EmailLoginScreen
* ❌ 실패 시 → 에러 다이얼로그 확인 → 화면 유지 (재시도 가능)
* ⬅️ 취소 시 → EmailLoginScreen

---

## 💾 데이터 저장

* 없음 (데이터 저장 없이 API 호출만)

---

## 🎨 UI 구성

| 요소 | 스펙 |
|------|------|
| **상단바** | 높이 `56dp`, 타이틀 "비밀번호 변경", 뒤로가기 버튼 |
| **이메일 라벨** | 크기 `14sp`, 굵게, 좌측 여백 `4dp` |
| **이메일 입력 필드** | 높이 `36dp`, 이메일 키보드, 검증 아이콘 |
| **확인 버튼** | 하단 고정, 전체 너비, 이메일 검증 통과 시 활성화 |
| **로딩 오버레이** | 전체 화면, API 호출 중 표시 |

---

## ⚠️ 에러 처리

| 상황 | 처리 방법 |
|------|----------|
| 이메일 미입력 | "필수 항목" 에러 표시 |
| 이메일 형식 오류 | "유효하지 않은 이메일 형식" 에러 표시 |
| 이메일 없음 (gcode=1002) | "이메일을 확인해 주세요" 다이얼로그 |
| API 에러 | "이메일을 확인해 주세요" 다이얼로그 |
| 네트워크 에러 | "이메일을 확인해 주세요" 다이얼로그 |

---

## 📧 성공 처리

### 성공 다이얼로그
* 메시지: "비밀번호 안내 메일이 발송되었습니다"
* 버튼: "확인"
* 동작: 확인 버튼 클릭 시 EmailLoginScreen으로 이동
* 백버튼: 비활성화
* 외부 터치: 비활성화

---

## 📝 주의사항

* 📧 **메일 발송**: 서버에서 비밀번호 재설정 링크가 포함된 메일 발송
* 🔐 **보안**: 이메일 존재 여부를 명확히 알려주지 않음 (일관된 에러 메시지)
* ⌨️ **자동 포커스**: 화면 진입 시 이메일 필드에 자동 포커스 (300ms 지연)
* ✅ **버튼 활성화**: 이메일 형식 검증 통과 시에만 확인 버튼 활성화
* 🔄 **재시도**: 실패 시 화면 유지로 바로 재시도 가능
* 📱 **키보드 제어**: Done 키로도 제출 가능

---

**문서 버전**: 1.0.0
**최종 수정일**: 2025-11-03
**작성**: 화면 분석 및 정리
